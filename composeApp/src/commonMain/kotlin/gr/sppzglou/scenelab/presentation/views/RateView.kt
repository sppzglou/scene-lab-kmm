package gr.sppzglou.scenelab.presentation.views

import androidx.compose.animation.core.animateDpAsState
import androidx.compose.animation.core.tween
import androidx.compose.foundation.background
import androidx.compose.foundation.border
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.aspectRatio
import androidx.compose.foundation.layout.fillMaxHeight
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.width
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.clip
import androidx.compose.ui.layout.onSizeChanged
import androidx.compose.ui.unit.dp
import gr.sppzglou.composebooster.Launch
import gr.sppzglou.composebooster.Shape
import gr.sppzglou.composebooster.multiPaths
import gr.sppzglou.composebooster.mutableRem
import gr.sppzglou.composebooster.pxToDp
import gr.sppzglou.scenelab.Clr.PrimaryColor
import gr.sppzglou.scenelab.Clr.SecondaryColor

@Composable
fun RateView(modifier: Modifier, rate: Double?) {
    var width by mutableRem(0)
    val shape = remember { Rate }
    var anim by mutableRem(false)
    val w by animateDpAsState(
        if (anim) (width.pxToDp / 10 * (rate ?: 0.0)).dp else 0.dp,
        tween(1000),
        label = ""
    )
    Box(modifier.onSizeChanged {
        width = it.width
    }) {
        Row(
            Modifier
                .fillMaxWidth()
                .aspectRatio(shape.ratio)
                .border(1.dp, SecondaryColor, shape.v)
                .clip(shape.v)
        ) {
            Box(
                Modifier
                    .fillMaxHeight()
                    .width(w)
                    .background(PrimaryColor)
            )
        }
    }

    Launch {
        anim = true
    }
}

val Rate = Shape(
    multiPaths(
        "M259,1c1.86,1.53,2.88,3.5,3.62,5.81c18.08,55.93,36.22,111.84,54.35,167.75c3.52,10.84,6.64,13.08,18.18,13.1 c57.81,0.09,115.62,0.15,173.44,0.31c2.63,0.01,6.37-1.42,7.54,2.02c1.23,3.6-2.86,4.42-4.91,5.93 c-46.24,34.13-92.56,68.16-138.86,102.21c-9.95,7.31-11.47,11.4-7.72,23.07c15.62,48.67,31.33,97.32,47.02,145.97 c1.89,5.86,3.88,11.69,5.78,17.55c0.41,1.26,0.76,2.57,0.83,3.88c0.08,1.6,0.66,3.64-0.96,4.63c-1.75,1.07-3.07-0.69-4.35-1.62 c-47.28-34.4-95.17-67.96-141.92-103.09c-0.53-0.4-1.06-0.81-1.6-1.2c-7.39-5.48-11.53-5.65-19.02-0.3 c-13.42,9.59-26.7,19.36-40.09,28.99c-35.43,25.49-70.88,50.95-106.31,76.43c-1.07,0.77-2.02,1.72-3.02,2.58c-1,0-2,0-3,0 c3.08-9.85,6.1-19.72,9.26-29.55c15.73-48.99,31.51-97.97,47.25-146.96c2.92-9.08,1.9-12.35-5.75-18.02 c-11.51-8.53-23.1-16.96-34.63-25.46c-35-25.81-69.96-51.66-105.02-77.39c-3.29-2.42-6.28-4.9-8.11-8.6c0-0.33,0-0.67,0-1 c2.49-0.1,4.99-0.28,7.48-0.28c57.83-0.03,115.66-0.05,173.49-0.07c12.85,0,16.01-2.26,19.9-14.38 c15.29-47.57,30.58-95.14,45.84-142.72c3.15-9.83,6.19-19.7,9.28-29.55C257.67,1,258.33,1,259,1z",
        "M614,495c2.12-10.13,5.86-19.79,8.99-29.61c15.62-49.03,31.44-98,47.21-146.98c3.32-10.33,2.51-13.11-6.26-19.57 c-46.96-34.58-93.93-69.14-140.9-103.7c-0.27-0.2-0.55-0.38-0.81-0.59c-2.07-1.71-4.93-3.67-4.22-6.3 c0.82-3.01,4.31-1.47,6.56-1.47c57.65-0.11,115.31-0.11,172.96-0.13c13.45,0,16.38-2.11,20.51-14.92 C736.38,114.83,754.69,57.91,773,1c1.33,0,2.67,0,4,0c18.41,56.71,36.81,113.42,55.22,170.13c0.36,1.11,0.67,2.23,1.04,3.34 c3.31,9.72,6.63,12.17,16.85,12.18c32.16,0.04,64.32,0.02,96.49,0.07c26.33,0.04,52.66,0.13,78.99,0.21 c1.49,0,3.08-0.14,4.47,0.28c2.75,0.84,3.42,2.57,1.19,4.76c-0.95,0.92-2.1,1.64-3.17,2.43 c-46.45,34.16-92.89,68.31-139.34,102.46c-10.5,7.72-11.91,11.45-7.91,23.86c17.5,54.38,35.1,108.72,52.66,163.08 c0.26,0.79,0.63,1.59,0.66,2.39c0.08,2.09,1.17,4.76-0.94,6.02c-2.01,1.19-3.58-1.14-5.11-2.26 c-47.71-34.68-96.02-68.54-143.16-104.01c-7.08-5.33-11.4-5.11-19.45,0.7c-34.05,24.57-68.06,49.19-102.12,73.75 C647.28,471.98,631.12,483.46,615,495C614.67,495,614.33,495,614,495z",
        "M1293,1c18.41,56.71,36.81,113.42,55.22,170.13c0.36,1.11,0.67,2.23,1.04,3.34c3.31,9.72,6.63,12.17,16.85,12.18 c32.16,0.04,64.32,0.02,96.49,0.07c26.33,0.04,52.66,0.13,78.99,0.21c1.49,0,3.08-0.14,4.47,0.28c2.75,0.84,3.42,2.57,1.19,4.75 c-0.95,0.92-2.1,1.64-3.17,2.43c-46.45,34.16-92.89,68.31-139.34,102.46c-10.5,7.72-11.91,11.45-7.91,23.86 c17.5,54.38,35.1,108.72,52.66,163.08c0.26,0.79,0.63,1.59,0.66,2.39c0.08,2.09,1.17,4.76-0.94,6.02 c-2.01,1.19-3.58-1.14-5.11-2.26c-47.71-34.68-96.02-68.54-143.16-104.01c-7.08-5.33-11.4-5.11-19.45,0.7 c-34.05,24.57-68.06,49.19-102.12,73.75c-16.08,11.59-32.24,23.08-48.36,34.62c-0.33,0-0.67,0-1,0 c2.12-10.13,5.86-19.79,8.99-29.61c15.62-49.03,31.44-98,47.21-146.98c3.32-10.33,2.51-13.11-6.26-19.57 c-46.96-34.58-93.93-69.14-140.9-103.7c-0.27-0.2-0.55-0.38-0.81-0.59c-2.07-1.71-4.93-3.67-4.22-6.3 c0.82-3.01,4.31-1.47,6.56-1.47c57.65-0.11,115.31-0.11,172.96-0.13c13.45,0,16.38-2.11,20.51-14.92 C1252.38,114.83,1270.69,57.91,1289,1C1290.33,1,1291.67,1,1293,1z",
        "M1809,1c18.41,56.71,36.81,113.42,55.22,170.13c0.36,1.11,0.67,2.23,1.04,3.34c3.31,9.72,6.63,12.17,16.85,12.18 c32.16,0.04,64.32,0.02,96.49,0.07c26.33,0.04,52.66,0.13,78.99,0.21c1.49,0,3.08-0.14,4.47,0.28c2.75,0.84,3.42,2.57,1.19,4.75 c-0.95,0.92-2.1,1.64-3.17,2.43c-46.45,34.16-92.89,68.31-139.34,102.46c-10.5,7.72-11.91,11.45-7.91,23.86 c17.5,54.38,35.1,108.72,52.66,163.08c0.26,0.79,0.63,1.59,0.66,2.39c0.08,2.09,1.17,4.76-0.94,6.02 c-2.01,1.19-3.58-1.14-5.11-2.26c-47.71-34.68-96.02-68.54-143.16-104.01c-7.08-5.33-11.4-5.11-19.45,0.7 c-34.05,24.57-68.06,49.19-102.12,73.75c-16.08,11.59-32.24,23.08-48.36,34.62c-0.33,0-0.67,0-1,0 c2.12-10.13,5.86-19.79,8.99-29.61c15.62-49.03,31.44-98,47.21-146.98c3.32-10.33,2.51-13.11-6.26-19.57 c-46.96-34.58-93.93-69.14-140.9-103.7c-0.27-0.2-0.55-0.38-0.81-0.59c-2.07-1.71-4.93-3.67-4.22-6.3 c0.82-3.01,4.31-1.47,6.56-1.47c57.65-0.11,115.31-0.11,172.96-0.13c13.45,0,16.38-2.11,20.51-14.92 C1768.38,114.83,1786.69,57.91,1805,1C1806.33,1,1807.67,1,1809,1z",
        "M2162,495c2.12-10.13,5.86-19.79,8.99-29.61c15.62-49.03,31.44-98,47.21-146.98c3.32-10.33,2.52-13.11-6.26-19.57 c-46.96-34.58-93.93-69.14-140.9-103.7c-0.27-0.2-0.55-0.38-0.81-0.59c-2.07-1.71-4.93-3.67-4.22-6.3 c0.82-3.01,4.31-1.47,6.56-1.47c57.65-0.11,115.31-0.11,172.96-0.13c13.44,0,16.39-2.11,20.51-14.92 C2284.38,114.82,2302.69,57.91,2321,1c1.33,0,2.67,0,4,0c1.99,6.18,3.96,12.37,5.97,18.55c16.61,51.17,33.22,102.34,49.82,153.52 c3.69,11.38,6.69,13.58,18.85,13.59c57.83,0.08,115.66,0.16,173.49,0.26c2.78,0,5.76-0.56,7.87,2.08c0,0.67,0,1.33,0,2 c-1.51,1.04-3.05,2.03-4.52,3.12c-46.59,34.24-93.17,68.5-139.75,102.74c-10.5,7.72-11.89,11.45-7.9,23.86 c15.56,48.53,31.24,97.02,46.86,145.53c2.24,6.96,4.52,13.92,6.52,20.96c0.46,1.6,0.87,3.95-0.98,5.04 c-1.72,1.02-3.06-0.78-4.34-1.71c-47.69-34.7-96.01-68.55-143.15-104.02c-7.68-5.78-11.76-5.97-19.43-0.45 C2263.85,422.35,2213.43,458.68,2163,495C2162.67,495,2162.33,495,2162,495z"
    ),
    2580F, 494F
)